<!--
 * @Descripttion: d3 操作 svg 画弦
 * @Author: tom-z(spirit108@foxmail.com)
 * @Date: 2020-03-11 14:19:53
 * @LastEditors: tom-z(spirit108@foxmail.com)
 * @LastEditTime: 2020-04-30 13:41:55
 -->
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://d3js.org/d3.v5.js"></script>
  <title>弧</title>
  <style>
    .svg-box {
      border: 1px solid #ccc;
      width: 500px;
      height: 500px;
    }
  </style>
</head>

<body>
  <div class="svg-box"></div>
  <script>
    let config = {
      warpW: 500,
      warpH: 500,
      warpBg: "#faf0b1",
      wrapPadding: 30,
      r: 5
    };
    console.log(d3);
    function initD3(ele) {
      let _svgEle = d3.select(ele).append("svg");
      _svgEle
        .attr("width", "100%")
        .attr("height", "100%")
        .attr("style", `background: ${config.warpBg};`);
      return _svgEle;
    }
    let svgEle = initD3(".svg-box")
    let arcObj = {
      source: {
        startAngle: 0.5,
        endAngle: Math.PI * 0.8,
        radius: 100
      },
      target: {
        startAngle: 0.5,
        endAngle: Math.PI * 0.8,
        radius: 100
      }
    }

    /*
      * 渲染区域
      * @param svg<object>: svg 画布对象
      * @param option<object>: 画弧擦参数 1. innerRadius： 内圆半径  2. outerRadius： 外圆半径 3. startAngle：起始角度 4. endAngle： 终止角度
      * @param x<number>： 弧心 x 位置
      * @param y<number>： 弧心 y 位置
    */
    function renderArc(svg, option, x, y) {
      let pathObj = d3.ribbon()
      svg.selectAll("path").remove()
      svg.append("path")
        .attr("d", pathObj(option))
        .attr("transform", "translate(" + x + ", " + y + ")")
        .attr("fill", "#820")
    }
    renderArc(svgEle, arcObj, 250, 250)
  </script>
</body>

</html>